{"version":3,"sources":["route-box.js","header.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["RouteBox","props","className","from","map","o","index","nickname","available_spaces","version","to","empty_spaces","defaultProps","Header","useState","target","destination","setDestination","type","id","onClick","e","event","value","checked","document","title","onSwitchDestination","handleClick","defaultChecked","onSetSafetyCount","safetyCount","nicknames","station_no","routes2Work","routes2Home","App","setSafetyCount","allStations","setAllStations","Date","getHours","setTarget","selectedRoutes","setSelectedRoutes","useEffect","Promise","all","fetch","then","res","json","responseV1","responseV2","v1","Object","values","retVal","sno","name_tw","sna","Number","bemp","sbi","forEach","v2","concat","allStops","station","find","t","c","length","route","filter","some","x","sort","a","b","indexOf","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.383c20c7.chunk.js","sourcesContent":["import \"./route-box.css\";\n\nfunction RouteBox(props) {\n  return (\n    <div className=\"container\">\n      <div className=\"item\">\n        {/* {JSON.stringify(props.from)} */}\n        {props.from.map((o, index) => {\n          return (\n            <div key={index}>\n              <b>{o.nickname}</b>\n              <p className=\"space-info\">\n                ÂèØÂÄü&nbsp;{o.available_spaces}&nbsp;Âè∞\n              </p>\n            </div>\n          );\n        })}\n      </div>\n      <div className=\"item\">\n        <div className={`triangle ${props.version === \"v1\" && \"v1-station\"}`} />\n      </div>\n      <div className=\"item\">\n        {props.to.map((o, index) => {\n          return (\n            <div key={index}>\n              <b>{o.nickname}</b>\n              <p className=\"space-info\">ÂèØÂÅú&nbsp;{o.empty_spaces}&nbsp;Âè∞</p>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nRouteBox.defaultProps = {\n  from: {},\n  to: {},\n};\n\nexport default RouteBox;\n","import { useState } from \"react\";\nimport \"./header.css\";\n\nfunction Header(props) {\n  const [destination, setDestination] = useState(props.target);\n\n  function handleClick(event) {\n    const isChecked = event.target.checked;\n    const value = isChecked ? \"work\" : \"home\";\n    document.title = value;\n    props.onSwitchDestination(value);\n    setDestination(value);\n  }\n\n  return (\n    <div>\n      <label className=\"switch\">\n        <input\n          type=\"checkbox\"\n          id=\"togBtn\"\n          onClick={(e) => handleClick(e)}\n          defaultChecked={destination === \"work\"}\n        />\n        <div className=\"slider round\">\n          <span className=\"on\">üåû‰∏äÁè≠</span>\n          <span className=\"off\">‰∏ãÁè≠üåô</span>\n        </div>\n      </label>\n\n      <div className=\"counter-block\">\n        <button onClick={(o) => props.onSetSafetyCount(props.safetyCount - 1)}>\n          üîª\n        </button>\n        <span className=\"safety-count-text\" title=\"safety count\">\n          {props.safetyCount}\n        </span>\n        <button onClick={(o) => props.onSetSafetyCount(props.safetyCount + 1)}>\n          üî∫\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Header;\n","const nicknames = [\n  { station_no: \"0037\", nickname: \"Êç∑ÈÅãÊù±ÈñÄÁ´ô Exit 4\" },\n  { station_no: \"0362\", nickname: \"Â∏´Â§ß\" },\n  { station_no: \"0032\", nickname: \"Êç∑ÈÅãÂÖ≠ÂºµÁäÅÁ´ô\" },\n  { station_no: \"0087\", nickname: \"Êç∑ÈÅãÂ§ßÂÆâÁ´ô\" },\n  { station_no: \"0074\", nickname: \"Êç∑ÈÅãÊù±ÈñÄÁ´ô Exit 6\" },\n  { station_no: \"500101019\", nickname: \"ÂíåÂπ≥Ëá•ÈæçË°óÂè£\" },\n  { station_no: \"500101101\", nickname: \"Êç∑ÈÅãÂÖ≠ÂºµÁäÅÁ´ô\" },\n  { station_no: \"500106066\", nickname: \"Êç∑ÈÅãÊù±ÈñÄÁ´ô Exit 6\" },\n  { station_no: \"500101134\", nickname: \"Êç∑ÈÅãÂ§ßÂÆâÁ´ô Exit 4\" },\n  { station_no: \"500101117\", nickname: \"Êç∑ÈÅãÊù±ÈñÄÁ´ô Exit 3\" },\n  { station_no: \"500101002\", nickname: \"Êç∑ÈÅãÁßëÊäÄÂ§ßÊ®ìÁ´ô\" },\n  { station_no: \"500101001\", nickname: \"Êç∑ÈÅãÁßëÊäÄÂ§ßÊ®ìÁ´ô\" },\n\n  { station_no: \"0126\", nickname: \"Trend Micro\" },\n  { station_no: \"0405\", nickname: \"ÂåóÊïôÂ§ß Ê≠£ÈñÄ\" },\n  { station_no: \"500101092\", nickname: \"ÂíåÂπ≥ÂØ¶Â∞è\" },\n  { station_no: \"500101091\", nickname: \"ÂåóÊïôÂ§ß ÂÅ¥ÈñÄ\" },\n  { station_no: \"500101123\", nickname: \"Trend Micro\" },\n];\nconst routes2Work = [\n  {\n    version: \"v2\",\n    from: [\"500101117\", \"500106066\", \"500101134\", \"500101101\"],\n    to: [\"500101123\", \"500101092\", \"500101091\"],\n  },\n  {\n    version: \"v1\",\n    from: [\"0037\", \"0074\", \"0087\", \"0362\", \"0032\"],\n    to: [\"0126\"],\n  },\n];\n\nconst routes2Home = [\n  {\n    version: \"v2\",\n    from: [\"500101123\", \"500101092\", \"500101091\", \"500101019\"],\n    to: [\n      \"500101117\",\n      \"500106066\",\n      \"500101134\",\n      \"500101002\",\n      \"500101001\",\n\n      \"500101101\",\n    ],\n  },\n  {\n    version: \"v1\",\n    from: [\"0126\", \"0405\"],\n    to: [\"0037\", \"0074\", \"0087\", \"0032\", \"0362\"],\n  },\n];\nexport { routes2Work, routes2Home, nicknames };\n","import { useState, useEffect } from \"react\";\nimport RouteBox from \"./route-box\";\nimport Header from \"./header\";\nimport \"./App.css\";\nimport { routes2Work, routes2Home, nicknames } from \"./routes\";\n\nfunction App() {\n  const [safetyCount, setSafetyCount] = useState(3);\n  const [allStations, setAllStations] = useState([]);\n  const [target, setTarget] = useState(() => {\n    return new Date().getHours() >= 12 ? \"home\" : \"work\";\n  });\n  const [selectedRoutes, setSelectedRoutes] = useState([]);\n  useEffect(() => {\n    const v1Url =\n      \"https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.json\";\n    const v2Url =\n      \"https://apis.youbike.com.tw/api/front/station/all?lang=tw&type=2\";\n\n    Promise.all([\n      fetch(v1Url).then((res) => res.json()),\n      fetch(v2Url).then((res) => res.json()),\n    ])\n      .then(([responseV1, responseV2]) => {\n        const v1 = Object.values(responseV1.retVal).map((o) => {\n          return {\n            station_no: o.sno,\n            name_tw: o.sna,\n            empty_spaces: Number(o.bemp),\n            available_spaces: Number(o.sbi),\n            version: \"v1\",\n          };\n        });\n        responseV2.retVal.forEach((o) => {\n          o.version = \"v2\";\n        });\n        const v2 = responseV2.retVal;\n\n        const allStops = v1.concat(v2);\n        return allStops;\n      })\n      .then((allStops) => {\n        allStops.forEach(\n          (station) =>\n            (station.nickname =\n              nicknames.find((o) => o.station_no === station.station_no)\n                ?.nickname || station.name_tw)\n        );\n\n        setAllStations(allStops);\n      });\n  }, []);\n\n  useEffect(() => {\n    setSelectedRoutes(target === \"work\" ? routes2Work : routes2Home);\n  }, [target]);\n\n  return (\n    <div className=\"App\">\n      <Header\n        onSwitchDestination={(t) => {\n          setTarget(t);\n        }}\n        onSetSafetyCount={(c) => {\n          if (c >= 0) setSafetyCount(c);\n        }}\n        safetyCount={safetyCount}\n        target={target}\n      ></Header>\n      <ul>\n        {allStations.length > 0 &&\n          selectedRoutes.map((route, index) => {\n            const from = allStations\n              .filter(\n                (o) =>\n                  route.from.some((x) => x === o.station_no) &&\n                  o.available_spaces >= safetyCount\n              )\n              .sort((a, b) => {\n                return (\n                  route.from.indexOf(a.station_no) <\n                    route.from.indexOf(b.station_no) && -1\n                );\n              });\n            const to = allStations\n              .filter(\n                (o) =>\n                  route.to.some((x) => x === o.station_no) &&\n                  o.empty_spaces >= safetyCount\n              )\n              .sort((a, b) => {\n                return (\n                  route.to.indexOf(a.station_no) <\n                    route.to.indexOf(b.station_no) && -1\n                );\n              });\n            return (\n              <li key={index}>\n                <RouteBox from={from} to={to} version={route.version} />\n              </li>\n            );\n          })}\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}