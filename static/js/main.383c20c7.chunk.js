(this["webpackJsonpmy-bike"]=this["webpackJsonpmy-bike"]||[]).push([[0],[,,,,,,,,,function(n,t,e){},function(n,t,e){},,function(n,t,e){},function(n,t,e){},function(n,t,e){"use strict";e.r(t);var o=e(1),i=e.n(o),c=e(4),a=e.n(c),s=(e(9),e(2)),r=(e(10),e(0));function u(n){return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("div",{className:"item",children:n.from.map((function(n,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:n.nickname}),Object(r.jsxs)("p",{className:"space-info",children:["\u53ef\u501f\xa0",n.available_spaces,"\xa0\u53f0"]})]},t)}))}),Object(r.jsx)("div",{className:"item",children:Object(r.jsx)("div",{className:"triangle ".concat("v1"===n.version&&"v1-station")})}),Object(r.jsx)("div",{className:"item",children:n.to.map((function(n,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:n.nickname}),Object(r.jsxs)("p",{className:"space-info",children:["\u53ef\u505c\xa0",n.empty_spaces,"\xa0\u53f0"]})]},t)}))})]})}u.defaultProps={from:{},to:{}};var f=u;e(12);var l=function(n){var t=Object(o.useState)(n.target),e=Object(s.a)(t,2),i=e[0],c=e[1];return Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{className:"switch",children:[Object(r.jsx)("input",{type:"checkbox",id:"togBtn",onClick:function(t){return function(t){var e=t.target.checked?"work":"home";document.title=e,n.onSwitchDestination(e),c(e)}(t)},defaultChecked:"work"===i}),Object(r.jsxs)("div",{className:"slider round",children:[Object(r.jsx)("span",{className:"on",children:"\ud83c\udf1e\u4e0a\u73ed"}),Object(r.jsx)("span",{className:"off",children:"\u4e0b\u73ed\ud83c\udf19"})]})]}),Object(r.jsxs)("div",{className:"counter-block",children:[Object(r.jsx)("button",{onClick:function(t){return n.onSetSafetyCount(n.safetyCount-1)},children:"\ud83d\udd3b"}),Object(r.jsx)("span",{className:"safety-count-text",title:"safety count",children:n.safetyCount}),Object(r.jsx)("button",{onClick:function(t){return n.onSetSafetyCount(n.safetyCount+1)},children:"\ud83d\udd3a"})]})]})},j=(e(13),[{station_no:"0037",nickname:"\u6377\u904b\u6771\u9580\u7ad9 Exit 4"},{station_no:"0362",nickname:"\u5e2b\u5927"},{station_no:"0032",nickname:"\u6377\u904b\u516d\u5f35\u7281\u7ad9"},{station_no:"0087",nickname:"\u6377\u904b\u5927\u5b89\u7ad9"},{station_no:"0074",nickname:"\u6377\u904b\u6771\u9580\u7ad9 Exit 6"},{station_no:"500101019",nickname:"\u548c\u5e73\u81e5\u9f8d\u8857\u53e3"},{station_no:"500101101",nickname:"\u6377\u904b\u516d\u5f35\u7281\u7ad9"},{station_no:"500106066",nickname:"\u6377\u904b\u6771\u9580\u7ad9 Exit 6"},{station_no:"500101134",nickname:"\u6377\u904b\u5927\u5b89\u7ad9 Exit 4"},{station_no:"500101117",nickname:"\u6377\u904b\u6771\u9580\u7ad9 Exit 3"},{station_no:"500101002",nickname:"\u6377\u904b\u79d1\u6280\u5927\u6a13\u7ad9"},{station_no:"500101001",nickname:"\u6377\u904b\u79d1\u6280\u5927\u6a13\u7ad9"},{station_no:"0126",nickname:"Trend Micro"},{station_no:"0405",nickname:"\u5317\u6559\u5927 \u6b63\u9580"},{station_no:"500101092",nickname:"\u548c\u5e73\u5be6\u5c0f"},{station_no:"500101091",nickname:"\u5317\u6559\u5927 \u5074\u9580"},{station_no:"500101123",nickname:"Trend Micro"}]),m=[{version:"v2",from:["500101117","500106066","500101134","500101101"],to:["500101123","500101092","500101091"]},{version:"v1",from:["0037","0074","0087","0362","0032"],to:["0126"]}],b=[{version:"v2",from:["500101123","500101092","500101091","500101019"],to:["500101117","500106066","500101134","500101002","500101001","500101101"]},{version:"v1",from:["0126","0405"],to:["0037","0074","0087","0032","0362"]}];var d=function(){var n=Object(o.useState)(3),t=Object(s.a)(n,2),e=t[0],i=t[1],c=Object(o.useState)([]),a=Object(s.a)(c,2),u=a[0],d=a[1],h=Object(o.useState)((function(){return(new Date).getHours()>=12?"home":"work"})),v=Object(s.a)(h,2),O=v[0],k=v[1],x=Object(o.useState)([]),p=Object(s.a)(x,2),_=p[0],y=p[1];return Object(o.useEffect)((function(){Promise.all([fetch("https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.json").then((function(n){return n.json()})),fetch("https://apis.youbike.com.tw/api/front/station/all?lang=tw&type=2").then((function(n){return n.json()}))]).then((function(n){var t=Object(s.a)(n,2),e=t[0],o=t[1],i=Object.values(e.retVal).map((function(n){return{station_no:n.sno,name_tw:n.sna,empty_spaces:Number(n.bemp),available_spaces:Number(n.sbi),version:"v1"}}));o.retVal.forEach((function(n){n.version="v2"}));var c=o.retVal;return i.concat(c)})).then((function(n){n.forEach((function(n){var t;return n.nickname=(null===(t=j.find((function(t){return t.station_no===n.station_no})))||void 0===t?void 0:t.nickname)||n.name_tw})),d(n)}))}),[]),Object(o.useEffect)((function(){y("work"===O?m:b)}),[O]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(l,{onSwitchDestination:function(n){k(n)},onSetSafetyCount:function(n){n>=0&&i(n)},safetyCount:e,target:O}),Object(r.jsx)("ul",{children:u.length>0&&_.map((function(n,t){var o=u.filter((function(t){return n.from.some((function(n){return n===t.station_no}))&&t.available_spaces>=e})).sort((function(t,e){return n.from.indexOf(t.station_no)<n.from.indexOf(e.station_no)&&-1})),i=u.filter((function(t){return n.to.some((function(n){return n===t.station_no}))&&t.empty_spaces>=e})).sort((function(t,e){return n.to.indexOf(t.station_no)<n.to.indexOf(e.station_no)&&-1}));return Object(r.jsx)("li",{children:Object(r.jsx)(f,{from:o,to:i,version:n.version})},t)}))})]})},h=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,15)).then((function(t){var e=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;e(n),o(n),i(n),c(n),a(n)}))};a.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(d,{})}),document.getElementById("root")),h()}],[[14,1,2]]]);
//# sourceMappingURL=main.383c20c7.chunk.js.map